# =============================================
# Async Video Processing Backend
# Environment Configuration Template
# =============================================

# =============================================
# APPLICATION SETTINGS
# =============================================
NODE_ENV=development
PORT=5000
APP_NAME=async-video-processing-backend
LOG_LEVEL=info

# =============================================
# DATABASE CONFIGURATION
# =============================================
# PostgreSQL
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=your_database_password
DB_NAME=async_video_db
DB_POOL_MIN=2
DB_POOL_MAX=10
DATABASE_URL=postgresql://postgres:your_database_password@localhost:5432/async_video_db

# =============================================
# REDIS CONFIGURATION
# =============================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_URL=redis://localhost:6379/0

# Job Queue Settings
REDIS_QUEUE_PREFIX=async_video_
BULL_QUEUE_NAME=video_processing

# =============================================
# FILE UPLOAD CONFIGURATION
# =============================================
# Local storage
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=5368709120
ALLOWED_VIDEO_FORMATS=mp4,avi,mov,mkv,flv,wmv,webm
ALLOWED_AUDIO_FORMATS=mp3,wav,aac,flac,ogg,m4a

# Temporary storage for processing
TEMP_DIR=./temp
CLEANUP_TEMP_FILES=true
TEMP_FILE_RETENTION_HOURS=24

# =============================================
# VIDEO PROCESSING WORKER SETTINGS
# =============================================
# Worker concurrency and timeouts
WORKER_CONCURRENCY=4
WORKER_TIMEOUT_MS=3600000
WORKER_MAX_ATTEMPTS=3
WORKER_BACKOFF_DELAY=5000

# FFmpeg settings
FFMPEG_PATH=/usr/bin/ffmpeg
FFPROBE_PATH=/usr/bin/ffprobe
FFMPEG_TIMEOUT_MS=1800000

# Video output settings
OUTPUT_FORMATS=mp4,webm,hls
OUTPUT_QUALITY=medium
ENABLE_THUMBNAIL_GENERATION=true
THUMBNAIL_COUNT=5
ENABLE_SUBTITLES=false

# Streaming settings
ENABLE_HLS_STREAMING=true
HLS_SEGMENT_DURATION=10
HLS_SEGMENT_COUNT=5

# =============================================
# JWT AUTHENTICATION
# =============================================
JWT_SECRET=your_jwt_secret_key_change_this_in_production
JWT_EXPIRATION=24h
JWT_REFRESH_SECRET=your_jwt_refresh_secret_key_change_this_in_production
JWT_REFRESH_EXPIRATION=7d

# =============================================
# AWS CONFIGURATION
# =============================================
# AWS General Settings
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your_aws_access_key_id
AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key

# S3 Bucket Configuration
AWS_S3_BUCKET=your-video-processing-bucket
AWS_S3_BUCKET_REGION=us-east-1
S3_INPUT_PREFIX=videos/input/
S3_OUTPUT_PREFIX=videos/output/
S3_TEMP_PREFIX=videos/temp/
S3_PUBLIC_URL=https://your-video-processing-bucket.s3.amazonaws.com
S3_ENABLE_VERSIONING=true
S3_ENABLE_ENCRYPTION=true
S3_ENCRYPTION_KEY_ID=

# CloudFront Distribution (optional)
CLOUDFRONT_DOMAIN_NAME=
CLOUDFRONT_DISTRIBUTION_ID=

# SQS Configuration (optional)
AWS_SQS_QUEUE_URL=
AWS_SQS_QUEUE_NAME=async-video-processing

# Lambda Configuration (optional)
AWS_LAMBDA_FUNCTION_NAME=
AWS_LAMBDA_ROLE_ARN=

# =============================================
# ELASTICSEARCH CONFIGURATION
# =============================================
ELASTICSEARCH_HOST=localhost
ELASTICSEARCH_PORT=9200
ELASTICSEARCH_PROTOCOL=http
ELASTICSEARCH_INDEX_PREFIX=async_video
ELASTICSEARCH_LOG_LEVEL=info

# =============================================
# CORS & SECURITY
# =============================================
CORS_ORIGIN=http://localhost:3000,http://localhost:3001
CORS_CREDENTIALS=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# =============================================
# EXTERNAL SERVICES
# =============================================
# Email Service (optional)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_app_password
SMTP_FROM=noreply@asyncvideoprocessing.com

# Webhooks
WEBHOOK_SECRET=your_webhook_secret
WEBHOOK_RETRY_ATTEMPTS=3
WEBHOOK_TIMEOUT_MS=30000

# =============================================
# MONITORING & LOGGING
# =============================================
# Sentry (optional)
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# NewRelic (optional)
NEWRELIC_ENABLED=false
NEWRELIC_LICENSE_KEY=

# DataDog (optional)
DATADOG_ENABLED=false
DATADOG_API_KEY=

# =============================================
# STORAGE OPTIONS
# =============================================
# Storage backend selection: 'local', 's3', 'gcs', 'azure'
STORAGE_BACKEND=local

# Google Cloud Storage (if using GCS)
GCS_PROJECT_ID=
GCS_BUCKET_NAME=
GCS_KEY_FILE_PATH=

# Azure Storage (if using Azure)
AZURE_STORAGE_ACCOUNT_NAME=
AZURE_STORAGE_ACCOUNT_KEY=
AZURE_CONTAINER_NAME=

# =============================================
# NOTIFICATION SETTINGS
# =============================================
ENABLE_NOTIFICATIONS=true
NOTIFICATION_CHANNELS=email,webhook,push
PUSH_NOTIFICATION_SERVICE=firebase

# Firebase Configuration (optional)
FIREBASE_PROJECT_ID=
FIREBASE_PRIVATE_KEY=
FIREBASE_CLIENT_EMAIL=

# =============================================
# FEATURE FLAGS
# =============================================
FEATURE_GPU_ACCELERATION=false
FEATURE_DISTRIBUTED_PROCESSING=false
FEATURE_ADAPTIVE_BITRATE=false
FEATURE_AI_TRANSCRIPTION=false
FEATURE_CONTENT_MODERATION=false

# =============================================
# TESTING
# =============================================
NODE_ENV_TEST=test
TEST_DB_URL=postgresql://postgres:test@localhost:5432/async_video_test
TEST_REDIS_URL=redis://localhost:6380/1
